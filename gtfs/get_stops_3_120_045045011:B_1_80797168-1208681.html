<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta http-equiv="Content-Script-Type" content="text/javascript" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<title>Interface GTFS</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-polylinedecorator/1.1.0/leaflet.polylineDecorator.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
	</head>
<body>
<p><a href="type_of_pt.html">Home</a>
 - <a href="get_agency_3.html">Bus</a>
 - <a href="get_routes_3_120.html">120</a>
 - <a href="get_trips_3_120_045045011:B_1.html">045045011:B 1</a>
 80797168-1208681
</p>
<p><button onclick="get_itin()">Itinéraire</button></p>
<p id="load_josm"></p>
<table id="osm"><tr>
<th><a href="http://localhost:8111/load_data?new_layer=false&data=%3C%3Fxml%20version%3D%271.0%27%20encoding%3D%27UTF-8%27%3F%3E%0A%3Cosm%20version%3D%220.6%22%20upload%3D%22false%22%3E%0A%3Crelation%20id%3D%22-1%22%3E%0A%3Ctag%20k%3D%22type%22%20v%3D%22route%22%2F%3E%0A%3Ctag%20k%3D%22route%22%20v%3D%22bus%22%2F%3E%0A%3Ctag%20k%3D%22public_transport%3Aversion%22%20v%3D%222%22%2F%3E%0A%3Ctag%20k%3D%22name%22%20v%3D%22Bus%20B%20%3A%20L%27Echat%20%E2%86%92%20Brunoy%20Gare%22%2F%3E%0A%3Ctag%20k%3D%22from%22%20v%3D%22L%27Echat%22%2F%3E%0A%3Ctag%20k%3D%22to%22%20v%3D%22Brunoy%20Gare%22%2F%3E%0A%3Ctag%20k%3D%22ref%22%20v%3D%22B%22%2F%3E%0A%3Ctag%20k%3D%22network%22%20v%3D%22STRAV%22%2F%3E%0A%3Ctag%20k%3D%22colour%22%20v%3D%22%231AC7FF%22%2F%3E%0A%3C%2Frelation%3E%0A%3C%2Fosm%3E%0A" target="hide">Créer la relation route dans JOSM</a> (attention aux doublons)
</th></tr>
<tr><td>name:Bus B : L'Echat → Brunoy Gare</td></tr>
<tr><td>from:L'Echat</td></tr>
<tr><td>to:Brunoy Gare</td></tr>
<tr><td>network:STRAV</td></tr>
<tr><td>ref:B</td></tr>
<tr><td>colour:#1AC7FF</td></tr>
</table>
<iframe name="hide" style="display: None;"></iframe>
<div>
<div style="width: 640px; float: left;">
<table id="stops" class="main">
<tr><th>name</th><th>OSM?</th><th>ajout</th><th>?</th></tr>

<tr>
<td style="background-color:#FF0000";>L'Echat</td>
<td style="background-color:#03FF00";> (node similaire à 0%) - distance 3 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.449464&right=2.450064&top=48.795052&bottom=48.794452&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=L'Echat&select=node2631231741" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.449464&right=2.450064&top=48.795052&bottom=48.794452" onclick="map.fitBounds([[48.794452,2.449464],[48.795052,2.450064]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFFF00";>Hopital h. Mondor</td>
<td style="background-color:#1DFF00";>Hôpital Henri Mondor (node similaire à 50%) - distance 13 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.450915&right=2.451515&top=48.798996&bottom=48.798396" onclick="map.fitBounds([[48.798396,2.450915],[48.798996,2.451515]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFCA00";>Edison</td>
<td style="background-color:#0BFF00";>Édison (node similaire à 40%) - distance 6 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.447564&right=2.448164&top=48.796887&bottom=48.796287" onclick="map.fitBounds([[48.796287,2.447564],[48.796887,2.448164]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Saint-Simon</td>
<td style="background-color:#2FFF00";>Saint-Simon (node similaire à 100%) - distance 20 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.446469&right=2.447069&top=48.793976&bottom=48.793376" onclick="map.fitBounds([[48.793376,2.446469],[48.793976,2.447069]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#9DFF00";>Universite</td>
<td style="background-color:#13FF00";>Université (node similaire à 69%) - distance 9 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.446714&right=2.447314&top=48.787441&bottom=48.786841" onclick="map.fitBounds([[48.786841,2.446714],[48.787441,2.447314]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFB600";>Prefecture</td>
<td style="background-color:#7DFF00";>Créteil - Préfecture (node similaire à 36%) - distance 50 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.451617&right=2.452217&top=48.784138&bottom=48.783538" onclick="map.fitBounds([[48.783538,2.451617],[48.784138,2.452217]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0500";>Haye aux Moines</td>
<td style="background-color:#28FF00";>Préfecture du Val-de-Marne (node similaire à 2%) - distance 17 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.446938&right=2.447538&top=48.784161&bottom=48.783561&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Haye aux Moines&select=node387899937" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.446938&right=2.447538&top=48.784161&bottom=48.783561" onclick="map.fitBounds([[48.783561,2.446938],[48.784161,2.447538]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF1A00";>Lycee du lac</td>
<td style="background-color:#06FF00";>Base de Loisir de Créteil (node similaire à 6%) - distance 4 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.443366&right=2.443966&top=48.779984&bottom=48.779384&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Lycee du lac&select=node387899940" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.443366&right=2.443966&top=48.779984&bottom=48.779384" onclick="map.fitBounds([[48.779384,2.443366],[48.779984,2.443966]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Carrefour Pompadour</td>
<td style="background-color:#10FF00";>Carrefour Pompadour (node similaire à 100%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.438975&right=2.439575&top=48.77393&bottom=48.77333" onclick="map.fitBounds([[48.77333,2.438975],[48.77393,2.439575]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Pompadour</td>
<td style="background-color:#10FF00";>Pompadour (node similaire à 100%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.441512&right=2.442112&top=48.764688&bottom=48.764088" onclick="map.fitBounds([[48.764088,2.441512],[48.764688,2.442112]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#DBFF00";>L Armand</td>
<td style="background-color:#15FF00";>Louis Armand (node similaire à 57%) - distance 10 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.442875&right=2.443475&top=48.759348&bottom=48.758748" onclick="map.fitBounds([[48.758748,2.442875],[48.759348,2.443475]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#88FF00";>Cite Sellier</td>
<td style="background-color:#15FF00";>Cité Sellier (node similaire à 73%) - distance 10 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.448&right=2.4486&top=48.75333&bottom=48.75273" onclick="map.fitBounds([[48.75273,2.448],[48.75333,2.4486]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFD000";>E Branly</td>
<td style="background-color:#10FF00";>Édouard Branly (node similaire à 41%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.447791&right=2.448391&top=48.750652&bottom=48.750052" onclick="map.fitBounds([[48.750052,2.447791],[48.750652,2.448391]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#E0FF00";>H Boucher</td>
<td style="background-color:#10FF00";>Hélène Boucher (node similaire à 56%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.450032&right=2.450632&top=48.750012&bottom=48.749412" onclick="map.fitBounds([[48.749412,2.450032],[48.750012,2.450632]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF9C00";>M Seguin</td>
<td style="background-color:#66FF00";>Marc Séguin (node similaire à 31%) - distance 41 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.452528&right=2.453128&top=48.747627&bottom=48.747027" onclick="map.fitBounds([[48.747027,2.452528],[48.747627,2.453128]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Massenet</td>
<td style="background-color:#06FF00";>Massenet (node similaire à 100%) - distance 4 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.452046&right=2.452646&top=48.745048&bottom=48.744448" onclick="map.fitBounds([[48.744448,2.452046],[48.745048,2.452646]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Hbm</td>
<td style="background-color:#15FF00";>HBM (node similaire à 100%) - distance 10 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.452011&right=2.452611&top=48.741264&bottom=48.740664" onclick="map.fitBounds([[48.740664,2.452011],[48.741264,2.452611]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0F00";>Berthelot</td>
<td style="background-color:#56FF00";>Georges Picot (node similaire à 4%) - distance 35 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.452303&right=2.452903&top=48.738244&bottom=48.737644&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Berthelot&select=node2540080274" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.452303&right=2.452903&top=48.738244&bottom=48.737644" onclick="map.fitBounds([[48.737644,2.452303],[48.738244,2.452903]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Henri Janin</td>
<td style="background-color:#20FF00";>Henri Janin (node similaire à 100%) - distance 14 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.449901&right=2.450501&top=48.733384&bottom=48.732784" onclick="map.fitBounds([[48.732784,2.449901],[48.733384,2.450501]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF4E00";>Vsg Gare RER d</td>
<td style="background-color:#08FF00";>Villeneuve-Saint-Georges Gare (node similaire à 16%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.446278&right=2.446878&top=48.729468&bottom=48.728868" onclick="map.fitBounds([[48.728868,2.446278],[48.729468,2.446878]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF4E00";>Vsg Gare RER d</td>
<td style="background-color:#08FF00";>Villeneuve-Saint-Georges Gare (node similaire à 16%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.446278&right=2.446878&top=48.729468&bottom=48.728868" onclick="map.fitBounds([[48.728868,2.446278],[48.729468,2.446878]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#3AFF00";>Vsg Pont d Yerres Conservatoire</td>
<td style="background-color:#03FF00";>Pont d'Yerres - Conservatoire (node similaire à 88%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.446581&right=2.447181&top=48.725&bottom=48.7244" onclick="map.fitBounds([[48.7244,2.446581],[48.725,2.447181]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFD000";>Polyclinique</td>
<td style="background-color:#0BFF00";>Polyclinique - Centre Hospitalier (node similaire à 41%) - distance 6 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.449564&right=2.450164&top=48.722247&bottom=48.721647" onclick="map.fitBounds([[48.721647,2.449564],[48.722247,2.450164]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Remonteru</td>
<td style="background-color:#08FF00";>Remonteru (node similaire à 100%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.455941&right=2.456541&top=48.71878&bottom=48.71818" onclick="map.fitBounds([[48.71818,2.455941],[48.71878,2.456541]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Boileau</td>
<td style="background-color:#03FF00";>Boileau (node similaire à 100%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.459058&right=2.459658&top=48.715523&bottom=48.714923" onclick="map.fitBounds([[48.714923,2.459058],[48.715523,2.459658]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Peupliers</td>
<td style="background-color:#10FF00";>Peupliers (node similaire à 100%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.463915&right=2.464515&top=48.713307&bottom=48.712707" onclick="map.fitBounds([[48.712707,2.463915],[48.713307,2.464515]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Longaines</td>
<td style="background-color:#10FF00";>Longaines (node similaire à 100%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.469117&right=2.469717&top=48.713409&bottom=48.712809" onclick="map.fitBounds([[48.712809,2.469117],[48.713409,2.469717]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Bulottes</td>
<td style="background-color:#3CFF00";>Bulottes (node similaire à 100%) - distance 25 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.474704&right=2.475304&top=48.715156&bottom=48.714556" onclick="map.fitBounds([[48.714556,2.474704],[48.715156,2.475304]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#DBFF00";>Lethumiere</td>
<td style="background-color:#08FF00";>Lethumière (node similaire à 57%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.478877&right=2.479477&top=48.716175&bottom=48.715575" onclick="map.fitBounds([[48.715575,2.478877],[48.716175,2.479477]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFF400";>Hotel de Ville de Yerres</td>
<td style="background-color:#10FF00";>Hôtel de Ville (node similaire à 48%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.485956&right=2.486556&top=48.716967&bottom=48.716367" onclick="map.fitBounds([[48.716367,2.485956],[48.716967,2.486556]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Poste</td>
<td style="background-color:#06FF00";>Poste (node similaire à 100%) - distance 4 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.49003&right=2.49063&top=48.716449&bottom=48.715849" onclick="map.fitBounds([[48.715849,2.49003],[48.716449,2.49063]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#C1FF00";>H Barbusse</td>
<td style="background-color:#25FF00";>Henri Barbusse (node similaire à 62%) - distance 16 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.488046&right=2.488646&top=48.711508&bottom=48.710908" onclick="map.fitBounds([[48.710908,2.488046],[48.711508,2.488646]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#7DFF00";>Pre des Roches</td>
<td style="background-color:#13FF00";>Pré des Roches (node similaire à 75%) - distance 9 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.490867&right=2.491467&top=48.710102&bottom=48.709502" onclick="map.fitBounds([[48.709502,2.490867],[48.710102,2.491467]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#92FF00";>Canotiers</td>
<td style="background-color:#13FF00";>Les Canotiers (node similaire à 71%) - distance 9 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.494746&right=2.495346&top=48.708488&bottom=48.707888" onclick="map.fitBounds([[48.707888,2.494746],[48.708488,2.495346]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF1F00";>Rue de Villecresnes</td>
<td style="background-color:#FFCD00";>3 Chênes (node similaire à 7%) - distance 119 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.499008&right=2.499608&top=48.707637&bottom=48.707037&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Rue de Villecresnes&select=node3728921258" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.499008&right=2.499608&top=48.707637&bottom=48.707037" onclick="map.fitBounds([[48.707037,2.499008],[48.707637,2.499608]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFF400";>Rue du Reveillon Ligne b</td>
<td style="background-color:#76FF00";>Rue du Réveillon (node similaire à 48%) - distance 47 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.498785&right=2.499385&top=48.705741&bottom=48.705141" onclick="map.fitBounds([[48.705141,2.498785],[48.705741,2.499385]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#C1FF00";>Rue Laterale</td>
<td style="background-color:#BCFF00";>Rue Latérale (node similaire à 62%) - distance 74 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.501236&right=2.501836&top=48.703562&bottom=48.702962" onclick="map.fitBounds([[48.702962,2.501236],[48.703562,2.501836]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#DBFF00";>Tresorerie</td>
<td style="background-color:#10FF00";>Trésorerie (node similaire à 57%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.50552&right=2.50612&top=48.701174&bottom=48.700574" onclick="map.fitBounds([[48.700574,2.50552],[48.701174,2.50612]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Brunoy Gare</td>
<td style="background-color:#10FF00";>Brunoy Gare (node similaire à 100%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.505054&right=2.505654&top=48.700016&bottom=48.699416" onclick="map.fitBounds([[48.699416,2.505054],[48.700016,2.505654]]);" target="hide">zoom JOSM</a></td>
</tr>
</table>
</div>
<div id="map" style="width: 640px; height: 400px; float: left;">
</div></div>


<script type='text/javascript'> // couche "osmfr" 
var osmfr = L.tileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', 
{
    attribution: 'donn&eacute;es &copy; <a href="http://osm.org/copyright">OpenStreetMap</a>/ODbL - rendu cquest',
    minZoom: 1,
    maxZoom: 20
});
  
// liste des couches de base
var baseMaps = {
    "Rendu FR": osmfr
};
var geojsonFeature ={
  "type":"Feature",
  "geometry": {
	"type":"GeometryCollection",
	"geometries": [
	{"type":"LineString","coordinates":[[2.449764,48.794752],[2.451215,48.798696],[2.447864,48.796587],[2.446769,48.793676],[2.447014,48.787141],[2.451917,48.783838],[2.447238,48.783861],[2.443666,48.779684],[2.439275,48.77363],[2.441812,48.764388],[2.443175,48.759048],[2.4483,48.75303],[2.448091,48.750352],[2.450332,48.749712],[2.452828,48.747327],[2.452346,48.744748],[2.452311,48.740964],[2.452603,48.737944],[2.450201,48.733084],[2.446578,48.729168],[2.446578,48.729168],[2.446881,48.7247],[2.449864,48.721947],[2.456241,48.71848],[2.459358,48.715223],[2.464215,48.713007],[2.469417,48.713109],[2.475004,48.714856],[2.479177,48.715875],[2.486256,48.716667],[2.49033,48.716149],[2.488346,48.711208],[2.491167,48.709802],[2.495046,48.708188],[2.499308,48.707337],[2.499085,48.705441],[2.501536,48.703262],[2.50582,48.700874],[2.505354,48.699716]]},
	{"type":"Point","coordinates":[2.449764,48.794752]}]},

  "properties": {
	"name":"test"
  }
};


map = L.map('map', { center: [47.000,2.000], zoom: 10, layers: [osmfr] } );
json = L.geoJSON(geojsonFeature).addTo(map); 

var myStyle = {
    "color": "#ff7800",
    "weight": 5,
    "opacity": 0.65
};

var nodes = [];
var legs;
var loadurl="http://localhost:8111/load_object?referrers=true&objects=";


function get_itin() {
var geojsonLayer = new L.GeoJSON.AJAX("http://router.project-osrm.org/match/v1/driving/2.449764,48.794752;2.451215,48.798696;2.447864,48.796587;2.446769,48.793676;2.447014,48.787141;2.451917,48.783838;2.447238,48.783861;2.443666,48.779684;2.439275,48.77363;2.441812,48.764388;2.443175,48.759048;2.4483,48.75303;2.448091,48.750352;2.450332,48.749712;2.452828,48.747327;2.452346,48.744748;2.452311,48.740964;2.452603,48.737944;2.450201,48.733084;2.446578,48.729168;2.446578,48.729168;2.446881,48.7247;2.449864,48.721947;2.456241,48.71848;2.459358,48.715223;2.464215,48.713007;2.469417,48.713109;2.475004,48.714856;2.479177,48.715875;2.486256,48.716667;2.49033,48.716149;2.488346,48.711208;2.491167,48.709802;2.495046,48.708188;2.499308,48.707337;2.499085,48.705441;2.501536,48.703262;2.50582,48.700874;2.505354,48.699716?timestamps=1487426700;1487426760;1487426880;1487427000;1487427180;1487427300;1487427540;1487427600;1487427660;1487427780;1487427840;1487427900;1487428020;1487428080;1487428140;1487428200;1487428260;1487428320;1487428440;1487428680;1487428980;1487429160;1487429220;1487429340;1487429400;1487429460;1487429520;1487429580;1487429640;1487429700;1487429760;1487429880;1487430000;1487430000;1487430060;1487430120;1487430180;1487430240;1487430300&radiuses=20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20&overview=full&geometries=geojson&generate_hints=false&annotations=true",{
	style:myStyle,
	middleware:function(data){
legs = data.matchings[0].legs;
for(var i in legs) {
nodes.push(legs[i].annotation.nodes);
}

for(i=0; i < nodes.length; i++){
for(j=0; j < nodes[i].length; j++) {
	loadurl += "n" + nodes[i][j] + ",";
}
}

document.getElementById("load_josm").innerHTML = '<a href="'+loadurl+'" target="hide">Load JOSM</a>';

		return data.matchings[0].geometry;
	}
});

geojsonLayer.addTo(map);
};



map.fitBounds(json.getBounds());
jj=json.getLayers()[0]._layers;

idx=Object.keys(jj)[0]

//debugger;
var decorator = L.polylineDecorator(jj[idx]._latlngs, 
{
    patterns: [
            {offset: 25, repeat: 50, symbol: L.Symbol.arrowHead({pixelSize: 15, pathOptions: 
{fillOpacity: 1, weight: 0}})}
        ]
}).addTo(map);

// ajout de l'échelle
L.control.scale().addTo(map);

</script>


</body>
</html>
