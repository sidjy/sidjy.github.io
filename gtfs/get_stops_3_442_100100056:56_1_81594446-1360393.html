<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta http-equiv="Content-Script-Type" content="text/javascript" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<title>Interface GTFS</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-polylinedecorator/1.1.0/leaflet.polylineDecorator.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
	</head>
<body>
<p><a href="type_of_pt.html">Home</a>
 - <a href="get_agency_3.html">Bus</a>
 - <a href="get_routes_3_442.html">442</a>
 - <a href="get_trips_3_442_100100056:56_1.html">100100056:56 1</a>
 81594446-1360393
</p>
<p><button onclick="get_itin()">Itinéraire</button></p>
<p id="load_josm"></p>
<table id="osm"><tr>
<th><a href="http://localhost:8111/load_data?new_layer=false&data=%3C%3Fxml%20version%3D%271.0%27%20encoding%3D%27UTF-8%27%3F%3E%0A%3Cosm%20version%3D%220.6%22%20upload%3D%22false%22%3E%0A%3Crelation%20id%3D%22-1%22%3E%0A%3Ctag%20k%3D%22type%22%20v%3D%22route%22%2F%3E%0A%3Ctag%20k%3D%22route%22%20v%3D%22bus%22%2F%3E%0A%3Ctag%20k%3D%22public_transport%3Aversion%22%20v%3D%222%22%2F%3E%0A%3Ctag%20k%3D%22name%22%20v%3D%22Bus%2056%20%3A%20Chateau%20de%20Vincennes%20%E2%86%92%20Porte%20de%20Clignancourt%22%2F%3E%0A%3Ctag%20k%3D%22from%22%20v%3D%22Chateau%20de%20Vincennes%22%2F%3E%0A%3Ctag%20k%3D%22to%22%20v%3D%22Porte%20de%20Clignancourt%22%2F%3E%0A%3Ctag%20k%3D%22ref%22%20v%3D%2256%22%2F%3E%0A%3Ctag%20k%3D%22network%22%20v%3D%22RATP%22%2F%3E%0A%3Ctag%20k%3D%22colour%22%20v%3D%22%23BB4D98%22%2F%3E%0A%3C%2Frelation%3E%0A%3C%2Fosm%3E%0A" target="hide">Créer la relation route dans JOSM</a> (attention aux doublons)
</th></tr>
<tr><td>name:Bus 56 : Chateau de Vincennes → Porte de Clignancourt</td></tr>
<tr><td>from:Chateau de Vincennes</td></tr>
<tr><td>to:Porte de Clignancourt</td></tr>
<tr><td>network:RATP</td></tr>
<tr><td>ref:56</td></tr>
<tr><td>colour:#BB4D98</td></tr>
</table>
<iframe name="hide" style="display: None;"></iframe>
<div>
<div style="width: 640px; float: left;">
<table id="stops" class="main">
<tr><th>name</th><th>OSM?</th><th>ajout</th><th>?</th></tr>

<tr>
<td style="background-color:#7DFF00";>Chateau de Vincennes</td>
<td style="background-color:#03FF00";>Château de Vincennes (node similaire à 75%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.440611&right=2.441211&top=48.84433&bottom=48.84373" onclick="map.fitBounds([[48.84373,2.440611],[48.84433,2.441211]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#92FF00";>Avenue du Chateau</td>
<td style="background-color:#28FF00";>Avenue du Château (node similaire à 71%) - distance 17 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.437209&right=2.437809&top=48.845097&bottom=48.844497" onclick="map.fitBounds([[48.844497,2.437209],[48.845097,2.437809]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Vignerons</td>
<td style="background-color:#03FF00";>Vignerons (node similaire à 100%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.432403&right=2.433003&top=48.845533&bottom=48.844933" onclick="map.fitBounds([[48.844933,2.432403],[48.845533,2.433003]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF9100";>Berault-Metro</td>
<td style="background-color:#32FF00";>Bérault (node similaire à 29%) - distance 21 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.427147&right=2.427747&top=48.845995&bottom=48.845395" onclick="map.fitBounds([[48.845395,2.427147],[48.845995,2.427747]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Aubert</td>
<td style="background-color:#2FFF00";>Aubert (node similaire à 100%) - distance 20 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.421836&right=2.422436&top=48.845765&bottom=48.845165" onclick="map.fitBounds([[48.845165,2.421836],[48.845765,2.422436]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#44FF00";>Mairie de Saint-Mande</td>
<td style="background-color:#1BFF00";>Mairie de Saint-Mandé (node similaire à 86%) - distance 12 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.416918&right=2.417518&top=48.844097&bottom=48.843497" onclick="map.fitBounds([[48.843497,2.416918],[48.844097,2.417518]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#44FF00";>Porte de Saint-Mande</td>
<td style="background-color:#3CFF00";>Porte de Saint-Mandé (node similaire à 86%) - distance 25 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.410301&right=2.410901&top=48.844641&bottom=48.844041" onclick="map.fitBounds([[48.844041,2.410301],[48.844641,2.410901]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Docteur Netter</td>
<td style="background-color:#66FF00";>Docteur Netter (node similaire à 100%) - distance 41 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.406584&right=2.407184&top=48.845038&bottom=48.844438" onclick="map.fitBounds([[48.844438,2.406584],[48.845038,2.407184]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Picpus</td>
<td style="background-color:#13FF00";>Square Courteline - Hôpital Rothschild (node similaire à 0%) - distance 9 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.401682&right=2.402282&top=48.845778&bottom=48.845178&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Picpus&select=node1581660136" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.401682&right=2.402282&top=48.845778&bottom=48.845178" onclick="map.fitBounds([[48.845178,2.401682],[48.845778,2.402282]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Nation - Place des Antilles</td>
<td style="background-color:#42FF00";>Nation-Place des Antilles (node similaire à 100%) - distance 27 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.397846&right=2.398446&top=48.848548&bottom=48.847948" onclick="map.fitBounds([[48.847948,2.397846],[48.848548,2.398446]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Nation</td>
<td style="background-color:#66FF00";>Nation (node similaire à 100%) - distance 41 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.39609&right=2.39669&top=48.849232&bottom=48.848632" onclick="map.fitBounds([[48.848632,2.39609],[48.849232,2.39669]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Nation - Voltaire</td>
<td style="background-color:#3AFF00";>Nation - Voltaire (node similaire à 100%) - distance 24 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.393884&right=2.394484&top=48.849863&bottom=48.849263" onclick="map.fitBounds([[48.849263,2.393884],[48.849863,2.394484]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Boulets - Montreuil</td>
<td style="background-color:#0EFF00";>Boulets - Montreuil (node similaire à 100%) - distance 7 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.389366&right=2.389966&top=48.852579&bottom=48.851979" onclick="map.fitBounds([[48.851979,2.389366],[48.852579,2.389966]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Charonne</td>
<td style="background-color:#03FF00";>Charonne (node similaire à 100%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.385827&right=2.386427&top=48.854648&bottom=48.854048" onclick="map.fitBounds([[48.854048,2.385827],[48.854648,2.386427]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Gymnase Japy</td>
<td style="background-color:#2DFF00";> (node similaire à 0%) - distance 19 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.382492&right=2.383092&top=48.856644&bottom=48.856044&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Gymnase Japy&select=node2148942127" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.382492&right=2.383092&top=48.856644&bottom=48.856044" onclick="map.fitBounds([[48.856044,2.382492],[48.856644,2.383092]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#88FF00";>Voltaire - Leon Blum</td>
<td style="background-color:#25FF00";>Voltaire - Léon Blum (node similaire à 73%) - distance 16 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.379674&right=2.380274&top=48.858362&bottom=48.857762" onclick="map.fitBounds([[48.857762,2.379674],[48.858362,2.380274]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Chemin Vert</td>
<td style="background-color:#2DFF00";>Chemin Vert (node similaire à 100%) - distance 19 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.376801&right=2.377401&top=48.860016&bottom=48.859416" onclick="map.fitBounds([[48.859416,2.376801],[48.860016,2.377401]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Saint-Ambroise</td>
<td style="background-color:#08FF00";>Saint-Ambroise (node similaire à 100%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.374187&right=2.374787&top=48.861599&bottom=48.860999" onclick="map.fitBounds([[48.860999,2.374187],[48.861599,2.374787]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Oberkampf - Richard Lenoir</td>
<td style="background-color:#0BFF00";>Jean-Pierre Timbaud (node similaire à 0%) - distance 6 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.370252&right=2.370852&top=48.863937&bottom=48.863337&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Oberkampf - Richard Lenoir&select=node500308183" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.370252&right=2.370852&top=48.863937&bottom=48.863337" onclick="map.fitBounds([[48.863337,2.370252],[48.863937,2.370852]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Jean-Pierre Timbaud</td>
<td style="background-color:#1BFF00";>Jean-Pierre Timbaud (node similaire à 100%) - distance 12 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.367392&right=2.367992&top=48.865654&bottom=48.865054" onclick="map.fitBounds([[48.865054,2.367392],[48.865654,2.367992]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#83FF00";>Republique - Voltaire</td>
<td style="background-color:#18FF00";>République - Voltaire (node similaire à 74%) - distance 11 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.365567&right=2.366167&top=48.866733&bottom=48.866133" onclick="map.fitBounds([[48.866133,2.365567],[48.866733,2.366167]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#DBFF00";>Republique</td>
<td style="background-color:#06FF00";>République (node similaire à 57%) - distance 4 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.363675&right=2.364275&top=48.868343&bottom=48.867743" onclick="map.fitBounds([[48.867743,2.363675],[48.868343,2.364275]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Jacques Bonsergent</td>
<td style="background-color:#08FF00";>Jacques Bonsergent (node similaire à 100%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.36072&right=2.36132&top=48.871219&bottom=48.870619" onclick="map.fitBounds([[48.870619,2.36072],[48.871219,2.36132]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Strasbourg - Magenta</td>
<td style="background-color:#15FF00";>Strasbourg–Magenta (node similaire à 100%) - distance 10 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.358418&right=2.359018&top=48.873808&bottom=48.873208" onclick="map.fitBounds([[48.873208,2.358418],[48.873808,2.359018]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Gare de l'est</td>
<td style="background-color:#08FF00";>Gare de l'Est (node similaire à 100%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.357738&right=2.358338&top=48.876576&bottom=48.875976" onclick="map.fitBounds([[48.875976,2.357738],[48.876576,2.358338]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#D1FF00";>La Fayette - Magenta - Gare du Nord</td>
<td style="background-color:#8AFF00";>La Fayette - Magenta (node similaire à 59%) - distance 55 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.354305&right=2.354905&top=48.87841&bottom=48.87781" onclick="map.fitBounds([[48.87781,2.354305],[48.87841,2.354905]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Magenta - Maubeuge - Gare du Nord</td>
<td style="background-color:#85FF00";>Magenta - Maubeuge - Gare du Nord (node similaire à 100%) - distance 53 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.351431&right=2.352031&top=48.881637&bottom=48.881037" onclick="map.fitBounds([[48.881037,2.351431],[48.881637,2.352031]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#83FF00";>Barbes - Rochechouart</td>
<td style="background-color:#03FF00";>Barbès - Rochechouart (node similaire à 74%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.349347&right=2.349947&top=48.884567&bottom=48.883967" onclick="map.fitBounds([[48.883967,2.349347],[48.884567,2.349947]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#B1FF00";>Chateau Rouge</td>
<td style="background-color:#28FF00";>Château Rouge (node similaire à 65%) - distance 17 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.34943&right=2.35003&top=48.888045&bottom=48.887445" onclick="map.fitBounds([[48.887445,2.34943],[48.888045,2.35003]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Marcadet - Poissonniers</td>
<td style="background-color:#2AFF00";> (node similaire à 0%) - distance 18 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.349485&right=2.350085&top=48.891694&bottom=48.891094&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Marcadet - Poissonniers&select=node1658001713" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.349485&right=2.350085&top=48.891694&bottom=48.891094" onclick="map.fitBounds([[48.891094,2.349485],[48.891694,2.350085]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Simplon</td>
<td style="background-color:#A4FF00";>Albert Kahn (node similaire à 0%) - distance 65 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.346869&right=2.347469&top=48.895109&bottom=48.894509&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Simplon&select=node2078331472" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.346869&right=2.347469&top=48.895109&bottom=48.894509" onclick="map.fitBounds([[48.894509,2.346869],[48.895109,2.347469]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Albert Kahn</td>
<td style="background-color:#FFBD00";>Albert Kahn (node similaire à 100%) - distance 125 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.346242&right=2.346842&top=48.896655&bottom=48.896055" onclick="map.fitBounds([[48.896055,2.346242],[48.896655,2.346842]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0A00";>Mont-Cenis</td>
<td style="background-color:#FFC500";>Porte de Clignancourt (node similaire à 3%) - distance 122 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.346488&right=2.347088&top=48.898165&bottom=48.897565&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Mont-Cenis&select=node637680774" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.346488&right=2.347088&top=48.898165&bottom=48.897565" onclick="map.fitBounds([[48.897565,2.346488],[48.898165,2.347088]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Porte de Clignancourt</td>
<td style="background-color:#3FFF00";>Porte de Clignancourt (node similaire à 100%) - distance 26 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2.34507&right=2.34567&top=48.898003&bottom=48.897403" onclick="map.fitBounds([[48.897403,2.34507],[48.898003,2.34567]]);" target="hide">zoom JOSM</a></td>
</tr>
</table>
</div>
<div id="map" style="width: 640px; height: 400px; float: left;">
</div></div>


<script type='text/javascript'> // couche "osmfr" 
var osmfr = L.tileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', 
{
    attribution: 'donn&eacute;es &copy; <a href="http://osm.org/copyright">OpenStreetMap</a>/ODbL - rendu cquest',
    minZoom: 1,
    maxZoom: 20
});
  
// liste des couches de base
var baseMaps = {
    "Rendu FR": osmfr
};
var geojsonFeature ={
  "type":"Feature",
  "geometry": {
	"type":"GeometryCollection",
	"geometries": [
	{"type":"LineString","coordinates":[[2.440911,48.84403],[2.437509,48.844797],[2.432703,48.845233],[2.427447,48.845695],[2.422136,48.845465],[2.417218,48.843797],[2.410601,48.844341],[2.406884,48.844738],[2.401982,48.845478],[2.398146,48.848248],[2.39639,48.848932],[2.394184,48.849563],[2.389666,48.852279],[2.386127,48.854348],[2.382792,48.856344],[2.379974,48.858062],[2.377101,48.859716],[2.374487,48.861299],[2.370552,48.863637],[2.367692,48.865354],[2.365867,48.866433],[2.363975,48.868043],[2.36102,48.870919],[2.358718,48.873508],[2.358038,48.876276],[2.354605,48.87811],[2.351731,48.881337],[2.349647,48.884267],[2.34973,48.887745],[2.349785,48.891394],[2.347169,48.894809],[2.346542,48.896355],[2.346788,48.897865],[2.34537,48.897703]]},
	{"type":"Point","coordinates":[2.440911,48.84403]}]},

  "properties": {
	"name":"test"
  }
};


map = L.map('map', { center: [47.000,2.000], zoom: 10, layers: [osmfr] } );
json = L.geoJSON(geojsonFeature).addTo(map); 

var myStyle = {
    "color": "#ff7800",
    "weight": 5,
    "opacity": 0.65
};

var nodes = [];
var legs;
var loadurl="http://localhost:8111/load_object?referrers=true&objects=";


function get_itin() {
var geojsonLayer = new L.GeoJSON.AJAX("http://router.project-osrm.org/match/v1/driving/2.440911,48.84403;2.437509,48.844797;2.432703,48.845233;2.427447,48.845695;2.422136,48.845465;2.417218,48.843797;2.410601,48.844341;2.406884,48.844738;2.401982,48.845478;2.398146,48.848248;2.39639,48.848932;2.394184,48.849563;2.389666,48.852279;2.386127,48.854348;2.382792,48.856344;2.379974,48.858062;2.377101,48.859716;2.374487,48.861299;2.370552,48.863637;2.367692,48.865354;2.365867,48.866433;2.363975,48.868043;2.36102,48.870919;2.358718,48.873508;2.358038,48.876276;2.354605,48.87811;2.351731,48.881337;2.349647,48.884267;2.34973,48.887745;2.349785,48.891394;2.347169,48.894809;2.346542,48.896355;2.346788,48.897865;2.34537,48.897703?timestamps=1487400600;1487400660;1487400720;1487400840;1487400900;1487400960;1487401020;1487401140;1487401200;1487401320;1487401320;1487401380;1487401440;1487401500;1487401560;1487401620;1487401680;1487401740;1487401800;1487401920;1487401920;1487401980;1487402040;1487402160;1487402220;1487402400;1487402460;1487402520;1487402580;1487402640;1487402700;1487402700;1487402760;1487402820&radiuses=20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20;20&overview=full&geometries=geojson&generate_hints=false&annotations=true",{
	style:myStyle,
	middleware:function(data){
legs = data.matchings[0].legs;
for(var i in legs) {
nodes.push(legs[i].annotation.nodes);
}

for(i=0; i < nodes.length; i++){
for(j=0; j < nodes[i].length; j++) {
	loadurl += "n" + nodes[i][j] + ",";
}
}

document.getElementById("load_josm").innerHTML = '<a href="'+loadurl+'" target="hide">Load JOSM</a>';

		return data.matchings[0].geometry;
	}
});

geojsonLayer.addTo(map);
};



map.fitBounds(json.getBounds());
jj=json.getLayers()[0]._layers;

idx=Object.keys(jj)[0]

//debugger;
var decorator = L.polylineDecorator(jj[idx]._latlngs, 
{
    patterns: [
            {offset: 25, repeat: 50, symbol: L.Symbol.arrowHead({pixelSize: 15, pathOptions: 
{fillOpacity: 1, weight: 0}})}
        ]
}).addTo(map);

// ajout de l'échelle
L.control.scale().addTo(map);

</script>


</body>
</html>
