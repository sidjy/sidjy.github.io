<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta http-equiv="Content-Script-Type" content="text/javascript" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<title>Interface GTFS</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-polylinedecorator/1.1.0/leaflet.polylineDecorator.js"></script>
	</head>
<body>
<p><a href="type_of_pt.html">Home</a>
 - <a href="get_agency_3.html">Bus</a>
 - <a href="get_routes_3_351.html">351</a>
 - <a href="get_trips_3_351_010010005:2_1.html">010010005:2 1</a>
 81042713-1251475
</p>
<table id="osm"><tr>
<th><a href="http://localhost:8111/load_data?new_layer=false&data=%3C%3Fxml%20version%3D%271.0%27%20encoding%3D%27UTF-8%27%3F%3E%0A%3Cosm%20version%3D%220.6%22%20upload%3D%22false%22%3E%0A%3Crelation%20id%3D%22-1%22%3E%0A%3Ctag%20k%3D%22type%22%20v%3D%22route%22%2F%3E%0A%3Ctag%20k%3D%22route%22%20v%3D%22bus%22%2F%3E%0A%3Ctag%20k%3D%22public_transport%3Aversion%22%20v%3D%222%22%2F%3E%0A%3Ctag%20k%3D%22name%22%20v%3D%22Bus%202%20%3A%20Zi%20Croix%20Blanche%20%E2%86%92%20All%C3%A9e%20de%20l%27Orge%22%2F%3E%0A%3Ctag%20k%3D%22from%22%20v%3D%22Zi%20Croix%20Blanche%22%2F%3E%0A%3Ctag%20k%3D%22to%22%20v%3D%22All%C3%A9e%20de%20l%27Orge%22%2F%3E%0A%3Ctag%20k%3D%22ref%22%20v%3D%222%22%2F%3E%0A%3Ctag%20k%3D%22network%22%20v%3D%22Genovebus%22%2F%3E%0A%3Ctag%20k%3D%22colour%22%20v%3D%22%23F8D829%22%2F%3E%0A%3C%2Frelation%3E%0A%3C%2Fosm%3E%0A" target="hide">Créer la relation route dans JOSM</a> (attention aux doublons)
</th></tr>
<tr><td>name:Bus 2 : Zi Croix Blanche → Allée de l'Orge</td></tr>
<tr><td>from:Zi Croix Blanche</td></tr>
<tr><td>to:Allée de l'Orge</td></tr>
<tr><td>network:Genovebus</td></tr>
<tr><td>ref:2</td></tr>
<tr><td>colour:#F8D829</td></tr>
</table>
<iframe name="hide" style="display: None;"></iframe>
<div>
<div style="width: 640px; float: left;">
<table id="stops" class="main">
<tr><th>name</th><th>OSM?</th><th>ajout</th><th>?</th></tr>

<tr>
<td style="background-color:#00FF00";>Allée de l'Orge</td>
<td style="background-color:#03FF00";>Allée de l'Orge (similaire à 100%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,301173&right=2,301773&top=48,646674&bottom=48,646074" onclick="map.fitBounds([[48,646074,2,301173],[48,646674,2,301773]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Claire Joie</td>
<td style="background-color:#AAFF00";>Claire Joie (similaire à 100%) - distance 67 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,302203&right=2,302803&top=48,647906&bottom=48,647306" onclick="map.fitBounds([[48,647306,2,302203],[48,647906,2,302803]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Jean Rostand</td>
<td style="background-color:#FF0000";>no</td>
<td><a href="http://localhost:8111/add_node?lat=48.650151&lon=2.306124&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Jean Rostand" target="hide">ajouter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,305824&right=2,306424&top=48,650451&bottom=48,649851" onclick="map.fitBounds([[48,649851,2,305824],[48,650451,2,306424]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Pont Cylindre</td>
<td style="background-color:#FF0000";>no</td>
<td><a href="http://localhost:8111/add_node?lat=48.650538&lon=2.309393&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Pont Cylindre" target="hide">ajouter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,309093&right=2,309693&top=48,650838&bottom=48,650238" onclick="map.fitBounds([[48,650238,2,309093],[48,650838,2,309693]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#D6FF00";>Gare de Sainte Geneviève des Bois</td>
<td style="background-color:#03FF00";>Gare de Ste Geneviève (similaire à 58%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,314084&right=2,314684&top=48,65314&bottom=48,65254" onclick="map.fitBounds([[48,65254,2,314084],[48,65314,2,314684]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Jardin Public</td>
<td style="background-color:#54FF00";>Jardin Public (similaire à 100%) - distance 34 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,318589&right=2,319189&top=48,650148&bottom=48,649548" onclick="map.fitBounds([[48,649548,2,318589],[48,650148,2,319189]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#F0FF00";>D Casanova</td>
<td style="background-color:#13FF00";>Danielle Casanova (similaire à 53%) - distance 9 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,322266&right=2,322866&top=48,6488&bottom=48,6482" onclick="map.fitBounds([[48,6482,2,322266],[48,6488,2,322866]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Colonel Fabien</td>
<td style="background-color:#0BFF00";>Colonel Fabien (similaire à 100%) - distance 6 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,327326&right=2,327926&top=48,647452&bottom=48,646852" onclick="map.fitBounds([[48,646852,2,327326],[48,647452,2,327926]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Victor Hugo</td>
<td style="background-color:#3CFF00";>Victor Hugo (similaire à 100%) - distance 25 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,329565&right=2,330165&top=48,647084&bottom=48,646484" onclick="map.fitBounds([[48,646484,2,329565],[48,647084,2,330165]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#92FF00";>Etoile Stalingrad</td>
<td style="background-color:#00FF00";>Étoile Stalingrad (similaire à 71%) - distance 0 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,334204&right=2,334804&top=48,645502&bottom=48,644902" onclick="map.fitBounds([[48,644902,2,334204],[48,645502,2,334804]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>F Buisson</td>
<td style="background-color:#25FF00";>F. Buisson (similaire à 100%) - distance 16 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,33807&right=2,33867&top=48,644297&bottom=48,643697" onclick="map.fitBounds([[48,643697,2,33807],[48,644297,2,33867]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Bois Clairs</td>
<td style="background-color:#22FF00";>Bois Clairs (similaire à 100%) - distance 15 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,341434&right=2,342034&top=48,643461&bottom=48,642861" onclick="map.fitBounds([[48,642861,2,341434],[48,643461,2,342034]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Guy Môquet</td>
<td style="background-color:#3CFF00";>Guy Môquet (similaire à 100%) - distance 25 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,337568&right=2,338168&top=48,641637&bottom=48,641037" onclick="map.fitBounds([[48,641037,2,337568],[48,641637,2,338168]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFFF00";>Marché</td>
<td style="background-color:#44FF00";>Donjon-Marché (similaire à 50%) - distance 28 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,332414&right=2,333014&top=48,63903&bottom=48,63843" onclick="map.fitBounds([[48,63843,2,332414],[48,63903,2,333014]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Eglise</td>
<td style="background-color:#8AFF00";> (similaire à 0%) - distance 55 m
</td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,333852&right=2,334452&top=48,634706&bottom=48,634106&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Eglise&select=node2506508686" target="hide">compléter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,333852&right=2,334452&top=48,634706&bottom=48,634106" onclick="map.fitBounds([[48,634106,2,333852],[48,634706,2,334452]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Commissariat</td>
<td style="background-color:#00FF00";>Commissariat (similaire à 100%) - distance 1 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,337907&right=2,338507&top=48,631434&bottom=48,630834" onclick="map.fitBounds([[48,630834,2,337907],[48,631434,2,338507]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Mare au Chanvre</td>
<td style="background-color:#00FF00";>Mare au Chanvre (similaire à 100%) - distance 2 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,339955&right=2,340555&top=48,629412&bottom=48,628812" onclick="map.fitBounds([[48,628812,2,339955],[48,629412,2,340555]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#49FF00";>Zi Croix Blanche</td>
<td style="background-color:#18FF00";>ZI La Croix Blanche (similaire à 85%) - distance 11 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,341324&right=2,341924&top=48,624072&bottom=48,623472" onclick="map.fitBounds([[48,623472,2,341324],[48,624072,2,341924]]);" target="hide">zoom JOSM</a></td>
</tr>
</table>
</div><div id="map" style="width: 640px; height: 400px; float: left;">
</div></div>


<script type='text/javascript'> // couche "osmfr" 
var osmfr = L.tileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', 
{
    attribution: 'donn&eacute;es &copy; <a href="http://osm.org/copyright">OpenStreetMap</a>/ODbL - rendu cquest',
    minZoom: 1,
    maxZoom: 20
});
  
// liste des couches de base
var baseMaps = {
    "Rendu FR": osmfr
};
var geojsonFeature ={
  "type":"Feature",
  "geometry": {
	"type":"GeometryCollection",
	"geometries": [
	{"type":"LineString","coordinates":[[2.341624,48.623772],[2.340255,48.629112],[2.338207,48.631134],[2.334152,48.634406],[2.332714,48.63873],[2.337868,48.641337],[2.341734,48.643161],[2.33837,48.643997],[2.334504,48.645202],[2.329865,48.646784],[2.327626,48.647152],[2.322566,48.6485],[2.318889,48.649848],[2.314384,48.65284],[2.309393,48.650538],[2.306124,48.650151],[2.302503,48.647606],[2.301473,48.646374]]},
	{"type":"Point","coordinates":[2.341624,48.623772]}]},

  "properties": {
	"name":"test"
  }
};


map = L.map('map', { center: [47.000,2.000], zoom: 10, layers: [osmfr] } );
json = L.geoJSON(geojsonFeature).addTo(map); 
map.fitBounds(json.getBounds());
jj=json.getLayers()[0]._layers;

idx=Object.keys(jj)[0]

//debugger;
var decorator = L.polylineDecorator(jj[idx]._latlngs, 
{
    patterns: [
            {offset: 25, repeat: 50, symbol: L.Symbol.arrowHead({pixelSize: 15, pathOptions: 
{fillOpacity: 1, weight: 0}})}
        ]
}).addTo(map);

// ajout de l'échelle
L.control.scale().addTo(map);

</script>


</body>
</html>
