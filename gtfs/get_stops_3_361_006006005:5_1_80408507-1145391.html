<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta http-equiv="Content-Script-Type" content="text/javascript" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<title>Interface GTFS</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-polylinedecorator/1.1.0/leaflet.polylineDecorator.js"></script>
	</head>
<body>
<p><a href="type_of_pt.html">Home</a>
 - <a href="get_agency_3.html">Bus</a>
 - <a href="get_routes_3_361.html">361</a>
 - <a href="get_trips_3_361_006006005:5_1.html">006006005:5 1</a>
 80408507-1145391
</p>
<table id="osm"><tr>
<th><a href="http://localhost:8111/load_data?new_layer=false&data=%3C%3Fxml%20version%3D%271.0%27%20encoding%3D%27UTF-8%27%3F%3E%0A%3Cosm%20version%3D%220.6%22%20upload%3D%22false%22%3E%0A%3Crelation%20id%3D%22-1%22%3E%0A%3Ctag%20k%3D%22type%22%20v%3D%22route%22%2F%3E%0A%3Ctag%20k%3D%22route%22%20v%3D%22bus%22%2F%3E%0A%3Ctag%20k%3D%22public_transport%3Aversion%22%20v%3D%222%22%2F%3E%0A%3Ctag%20k%3D%22name%22%20v%3D%22Bus%205%20%3A%20Oc%C3%A9anie%201%20%E2%86%92%20Gare%20d%27Orsay%20Ville%22%2F%3E%0A%3Ctag%20k%3D%22from%22%20v%3D%22Oc%C3%A9anie%201%22%2F%3E%0A%3Ctag%20k%3D%22to%22%20v%3D%22Gare%20d%27Orsay%20Ville%22%2F%3E%0A%3Ctag%20k%3D%22ref%22%20v%3D%225%22%2F%3E%0A%3Ctag%20k%3D%22network%22%20v%3D%22Mobicaps%22%2F%3E%0A%3Ctag%20k%3D%22colour%22%20v%3D%22%2326CFFF%22%2F%3E%0A%3C%2Frelation%3E%0A%3C%2Fosm%3E%0A" target="hide">Créer la relation route dans JOSM</a> (attention aux doublons)
</th></tr>
<tr><td>name:Bus 5 : Océanie 1 → Gare d'Orsay Ville</td></tr>
<tr><td>from:Océanie 1</td></tr>
<tr><td>to:Gare d'Orsay Ville</td></tr>
<tr><td>network:Mobicaps</td></tr>
<tr><td>ref:5</td></tr>
<tr><td>colour:#26CFFF</td></tr>
</table>
<iframe name="hide" style="display: None;"></iframe>
<div>
<div style="width: 640px; float: left;">
<table id="stops" class="main">
<tr><th>name</th><th>OSM?</th><th>ajout</th><th>?</th></tr>

<tr>
<td style="background-color:#DBFF00";>Gare d'Orsay Ville</td>
<td style="background-color:#2DFF00";>Gare d'Orsay RER (similaire à 57%) - distance 19 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,181797&right=2,182397&top=48,697716&bottom=48,697116" onclick="map.fitBounds([[48,697116,2,181797],[48,697716,2,182397]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Grand Mesnil</td>
<td style="background-color:#FF0000";>no</td>
<td><a href="http://localhost:8111/add_node?lat=48.695228&lon=2.172884&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Grand Mesnil" target="hide">ajouter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,172584&right=2,173184&top=48,695528&bottom=48,694928" onclick="map.fitBounds([[48,694928,2,172584],[48,695528,2,173184]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Ihes</td>
<td style="background-color:#25FF00";>IHES (similaire à 100%) - distance 16 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,165731&right=2,166331&top=48,69435&bottom=48,69375" onclick="map.fitBounds([[48,69375,2,165731],[48,69435,2,166331]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Tournemire</td>
<td style="background-color:#06FF00";>Tournemire (similaire à 100%) - distance 4 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,16798&right=2,16858&top=48,687351&bottom=48,686751" onclick="map.fitBounds([[48,686751,2,16798],[48,687351,2,16858]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Champagne</td>
<td style="background-color:#06FF00";>Champagne (similaire à 100%) - distance 4 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,172461&right=2,173061&top=48,687106&bottom=48,686506" onclick="map.fitBounds([[48,686506,2,172461],[48,687106,2,173061]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Barceleau</td>
<td style="background-color:#00FF00";>Barceleau (similaire à 100%) - distance 1 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,175489&right=2,176089&top=48,686921&bottom=48,686321" onclick="map.fitBounds([[48,686321,2,175489],[48,686921,2,176089]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Bathes</td>
<td style="background-color:#00FF00";>Bathes (similaire à 100%) - distance 1 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,178004&right=2,178604&top=48,685666&bottom=48,685066" onclick="map.fitBounds([[48,685066,2,178004],[48,685666,2,178604]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Bourgogne</td>
<td style="background-color:#0EFF00";>Bourgogne (similaire à 100%) - distance 7 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,177085&right=2,177685&top=48,684361&bottom=48,683761" onclick="map.fitBounds([[48,683761,2,177085],[48,684361,2,177685]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Stade</td>
<td style="background-color:#0BFF00";>Stade (similaire à 100%) - distance 6 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,173169&right=2,173769&top=48,682073&bottom=48,681473" onclick="map.fitBounds([[48,681473,2,173169],[48,682073,2,173769]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Cévennes</td>
<td style="background-color:#06FF00";>Cévennes (similaire à 100%) - distance 4 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,174563&right=2,175163&top=48,679037&bottom=48,678437" onclick="map.fitBounds([[48,678437,2,174563],[48,679037,2,175163]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FFE400";>Centre Commercial Ulis 2 - Aubrac</td>
<td style="background-color:#0BFF00";>CC Ulis 2 - Aubrac (similaire à 45%) - distance 6 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,174461&right=2,175061&top=48,677014&bottom=48,676414" onclick="map.fitBounds([[48,676414,2,174461],[48,677014,2,175061]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Terre de feu</td>
<td style="background-color:#37FF00";>Terre de Feu (similaire à 100%) - distance 23 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,195674&right=2,196274&top=48,677643&bottom=48,677043" onclick="map.fitBounds([[48,677043,2,195674],[48,677643,2,196274]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Miniparc</td>
<td style="background-color:#10FF00";>Miniparc (similaire à 100%) - distance 8 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,194312&right=2,194912&top=48,679224&bottom=48,678624" onclick="map.fitBounds([[48,678624,2,194312],[48,679224,2,194912]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Parana</td>
<td style="background-color:#18FF00";>Parana (similaire à 100%) - distance 11 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,196086&right=2,196686&top=48,680934&bottom=48,680334" onclick="map.fitBounds([[48,680334,2,196086],[48,680934,2,196686]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#9DFF00";>Atlantique 2</td>
<td style="background-color:#08FF00";>Atlantique II (similaire à 69%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,198798&right=2,199398&top=48,68171&bottom=48,68111" onclick="map.fitBounds([[48,68111,2,198798],[48,68171,2,199398]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#88FF00";>Atlantique 1</td>
<td style="background-color:#03FF00";>Atlantique I (similaire à 73%) - distance 3 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,199092&right=2,199692&top=48,683661&bottom=48,683061" onclick="map.fitBounds([[48,683061,2,199092],[48,683661,2,199692]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#FF0000";>Y</td>
<td style="background-color:#FF0000";>no</td>
<td><a href="http://localhost:8111/add_node?lat=48.6842&lon=2.202091&addtags=highway=bus_stop%7Cpublic_transport=platform%7Cname=Y" target="hide">ajouter arrêt</a></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,201791&right=2,202391&top=48,6845&bottom=48,6839" onclick="map.fitBounds([[48,6839,2,201791],[48,6845,2,202391]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Océanie 3</td>
<td style="background-color:#00FF00";>Océanie 3 (similaire à 100%) - distance 1 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,206746&right=2,207346&top=48,684505&bottom=48,683905" onclick="map.fitBounds([[48,683905,2,206746],[48,684505,2,207346]]);" target="hide">zoom JOSM</a></td>
</tr>
<tr>
<td style="background-color:#00FF00";>Océanie 1</td>
<td style="background-color:#08FF00";>Océanie 1 (similaire à 100%) - distance 5 m
</td>
<td></td>
<td><a href="http://localhost:8111/load_and_zoom?left=2,198767&right=2,199367&top=48,678177&bottom=48,677577" onclick="map.fitBounds([[48,677577,2,198767],[48,678177,2,199367]]);" target="hide">zoom JOSM</a></td>
</tr>
</table>
</div><div id="map" style="width: 640px; height: 400px; float: left;">
</div></div>


<script type='text/javascript'> // couche "osmfr" 
var osmfr = L.tileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', 
{
    attribution: 'donn&eacute;es &copy; <a href="http://osm.org/copyright">OpenStreetMap</a>/ODbL - rendu cquest',
    minZoom: 1,
    maxZoom: 20
});
  
// liste des couches de base
var baseMaps = {
    "Rendu FR": osmfr
};
var geojsonFeature ={
  "type":"Feature",
  "geometry": {
	"type":"GeometryCollection",
	"geometries": [
	{"type":"LineString","coordinates":[[2.199067,48.677877],[2.207046,48.684205],[2.202091,48.6842],[2.199392,48.683361],[2.199098,48.68141],[2.196386,48.680634],[2.194612,48.678924],[2.195974,48.677343],[2.174761,48.676714],[2.174863,48.678737],[2.173469,48.681773],[2.177385,48.684061],[2.178304,48.685366],[2.175789,48.686621],[2.172761,48.686806],[2.16828,48.687051],[2.166031,48.69405],[2.172884,48.695228],[2.182097,48.697416]]},
	{"type":"Point","coordinates":[2.199067,48.677877]}]},

  "properties": {
	"name":"test"
  }
};


map = L.map('map', { center: [47.000,2.000], zoom: 10, layers: [osmfr] } );
json = L.geoJSON(geojsonFeature).addTo(map); 
map.fitBounds(json.getBounds());
jj=json.getLayers()[0]._layers;

idx=Object.keys(jj)[0]

//debugger;
var decorator = L.polylineDecorator(jj[idx]._latlngs, 
{
    patterns: [
            {offset: 25, repeat: 50, symbol: L.Symbol.arrowHead({pixelSize: 15, pathOptions: 
{fillOpacity: 1, weight: 0}})}
        ]
}).addTo(map);

// ajout de l'échelle
L.control.scale().addTo(map);

</script>


</body>
</html>
